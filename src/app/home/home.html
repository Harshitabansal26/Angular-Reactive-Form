<div class="home-container">
  <!-- Header -->
  <div class="header-row" style="display: flex; justify-content: space-between; align-items: center;">
    <h1>Retailer Onboarding</h1>
    <button class="create-btn" (click)="createNewApplication()">Create New Application</button>
  </div>

  <!-- Search Filters -->
  <div class="search-box">
    <input [(ngModel)]="searchFields.businessName" placeholder="Business Name" />
    <input [(ngModel)]="searchFields.applicationId" placeholder="Application ID" />
    <input [(ngModel)]="searchFields.email" placeholder="Email" />
    <input [(ngModel)]="searchFields.mobile" placeholder="Mobile" />
    <input [(ngModel)]="searchFields.applicantName" placeholder="Applicant Name" />
    <input [(ngModel)]="searchFields.parish" placeholder="Parish" />

    <div class="search-center">
      <select [(ngModel)]="searchFields.retailerType">
        <option value="">All Retailers</option>
        <option value="Yes">Existing Retailer</option>
        <option value="No">New Retailer</option>
      </select>

      <input [(ngModel)]="searchFields.status" placeholder="Status" />
    </div>

    <!-- Buttons -->
    <div class="search-actions">
      <button class="search-btn" (click)="onSearch()">Search</button>
      <button class="reset-btn" (click)="resetSearch()">Reset</button>
    </div>
  </div>

  <!-- Applications Table -->
<div class="table-container" *ngIf="filteredApplications.length > 0; else noData">
  <div class="table-wrapper">
    <table class="table">
      <thead>
        <tr>
          <th *ngFor="let key of getKeys(filteredApplications[0])">
            {{ displayKey(key) }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let app of filteredApplications">
          <td *ngFor="let key of getKeys(app)">
            {{ app[key] }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Pagination Controls -->
<div class="pagination-container" *ngIf="totalPages > 1">
  <!-- Prev Button -->
  <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">
    Prev
  </button>

  <!-- First Page -->
  <button (click)="goToPage(1)" [class.active]="currentPage === 1">1</button>

  <!-- Left Ellipsis -->
  <span *ngIf="currentPage > 3">...</span>

  <!-- Middle Pages -->
  <ng-container *ngFor="let page of [currentPage - 1, currentPage, currentPage + 1]">
    <button *ngIf="page > 1 && page < totalPages"
            (click)="goToPage(page)"
            [class.active]="currentPage === page">
      {{ page }}
    </button>
  </ng-container>

  <!-- Right Ellipsis -->
  <span *ngIf="currentPage < totalPages - 2">...</span>

  <!-- Last Page -->
  <button *ngIf="totalPages > 1"
          (click)="goToPage(totalPages)"
          [class.active]="currentPage === totalPages">
    {{ totalPages }}
  </button>

  <!-- Next Button -->
  <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">
    Next
  </button>
</div>

  <ng-template #noData>
    <p>No applications found.</p>
  </ng-template>
</div>
